(function() {
    // Create the button element
    const button = document.createElement('button');
    button.innerHTML = 'ðŸš€'; // Rocket icon
    button.style.position = 'fixed';
    button.style.bottom = '20px'; // Distance from the bottom
    button.style.right = '20px';  // Distance from the right
    button.style.backgroundColor = '#007BFF'; // Button background color
    button.style.color = '#FFF'; // Button text color
    button.style.border = 'none';
    button.style.borderRadius = '50%'; // Circular button
    button.style.padding = '15px';
    button.style.fontSize = '24px'; // Adjust size for the icon
    button.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)'; // Add shadow
    button.style.transition = 'background-color 0.3s, transform 0.3s';
    button.style.cursor = 'pointer';
    button.style.zIndex = '1000'; // Ensure it is above other elements

    // Add hover effects to the button
    button.addEventListener('mouseover', function() {
        button.style.backgroundColor = '#0056b3'; // Darker shade on hover
        button.style.transform = 'scale(1.1)'; // Slightly enlarge on hover
    });
    
    button.addEventListener('mouseout', function() {
        button.style.backgroundColor = '#007BFF'; // Original color
        button.style.transform = 'scale(1)'; // Return to original size
    });

    // Create the modal
    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '100%';
    modal.style.height = '100%';
    modal.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
    modal.style.color = '#FFF';
    modal.style.display = 'none';
    modal.style.justifyContent = 'center';
    modal.style.alignItems = 'center';
    modal.style.zIndex = '1001'; // Ensure it is above the button

    const modalContent = document.createElement('div');
    modalContent.style.backgroundColor = '#333'; // Darker background
    modalContent.style.padding = '20px';
    modalContent.style.borderRadius = '8px';
    modalContent.style.textAlign = 'center';
    modalContent.style.maxWidth = '90%';
    modalContent.style.maxHeight = '80%';
    modalContent.style.overflowY = 'auto'; // Scroll if content is too long

    const modalText = document.createElement('p');
    modalText.style.marginBottom = '20px';
    modalText.style.wordWrap = 'break-word'; // Ensure long text wraps
    modalContent.appendChild(modalText);

    const copyButton = document.createElement('button');
    copyButton.innerText = 'Copy Text';
    copyButton.style.padding = '10px 20px';
    copyButton.style.backgroundColor = '#007BFF';
    copyButton.style.color = '#FFF';
    copyButton.style.border = 'none';
    copyButton.style.borderRadius = '5px';
    copyButton.style.cursor = 'pointer';
    copyButton.style.transition = 'background-color 0.3s';

    // Add hover effects to the copy button
    copyButton.addEventListener('mouseover', function() {
        copyButton.style.backgroundColor = '#0056b3'; // Darker shade on hover
    });
    
    copyButton.addEventListener('mouseout', function() {
        copyButton.style.backgroundColor = '#007BFF'; // Original color
    });

    // Append the content to the modal
    modalContent.appendChild(copyButton);
    modal.appendChild(modalContent);
    document.body.appendChild(modal);

    // Function to check for the element and show/hide the button
    function checkForElement() {
        const targetElement = document.querySelector('span.selectable-text.copyable-text[data-lexical-text="true"]');
        if (targetElement) {
            button.style.display = 'block';
        } else {
            button.style.display = 'none';
        }
    }

    // Add the button to the body but keep it hidden initially
    button.style.display = 'none';
    document.body.appendChild(button);

    // Add click event to the button
    button.addEventListener('click', function() {
        const targetElement = document.querySelector('span.selectable-text.copyable-text[data-lexical-text="true"]');
        if (targetElement) {
            modalText.innerText = targetElement.innerText; // Display the text in the modal
            modal.style.display = 'flex';
            // Set up the copy button click event
            copyButton.onclick = function() {
                navigator.clipboard.writeText(targetElement.innerText).then(() => {
                    alert('Text copied to clipboard!');
                }).catch(err => {
                    alert('Failed to copy text.');
                });
            };
        } else {
            alert('Target element not found.');
        }
    });

    // Add click event to close the modal when clicking outside of it
    modal.addEventListener('click', function(event) {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    });

    // Check for the element on page load and periodically
    checkForElement();
    setInterval(checkForElement, 1000); // Check every second
})();
